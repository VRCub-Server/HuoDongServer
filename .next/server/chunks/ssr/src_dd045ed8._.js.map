{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { cookies } from 'next/headers';\nimport { redirect } from 'next/navigation';\nimport { z } from 'zod';\nimport {\n  createEvent as apiCreateEvent,\n  joinEvent as apiJoinEvent,\n  leaveEvent as apiLeaveEvent,\n  checkInUser as apiCheckInUser,\n  getUserById,\n  getUserByUsername,\n  getEventById,\n  getEvents as apiGetEvents,\n  createUser as apiCreateUser,\n  getEventByCdKey,\n  getAnnouncements as apiGetAnnouncements,\n  deleteEventById as apiDeleteEventById,\n  updateEventById as apiUpdateEventById,\n} from './data';\nimport type { Event, User, Announcement } from './types';\nimport { checkNameMC } from './namemc';\n\nconst MAX_AGE = 60 * 60 * 24 * 30; \n\nconst LoginSchema = z.object({\n  minecraftUsername: z.string().min(1, \"Minecraft 用户名不能为空。\"),\n  password: z.string().min(1, \"密码不能为空。\"),\n});\n\nexport async function login(prevState: any, formData: FormData) {\n  try {\n    const validatedFields = LoginSchema.safeParse(Object.fromEntries(formData.entries()));\n\n    if (!validatedFields.success) {\n      return {\n        message: '输入无效。请检查您的用户名和密码。',\n        errors: validatedFields.error.flatten().fieldErrors,\n        success: false,\n      };\n    }\n\n    const { minecraftUsername, password } = validatedFields.data;\n    let user = await getUserByUsername(minecraftUsername);\n\n    if (user) {\n      if (user.password !== password) {\n        return { message: '密码不正确。', errors: { password: ['密码不正确。'] }, success: false };\n      }\n    } else {\n      const isNameMCValid = await checkNameMC(minecraftUsername);\n      if (!isNameMCValid) {\n        return { message: '此 Minecraft 用户名在 NameMC 上无效或无法验证。', errors: { minecraftUsername: ['此 Minecraft 用户名在 NameMC 上无效或无法验证。'] }, success: false };\n      }\n      try {\n        user = await apiCreateUser({ \n          id: minecraftUsername, \n          username: minecraftUsername,\n          password: password, \n        });\n      } catch (error: any) {\n        console.error(\"登录操作中的用户创建失败 (apiCreateUser):\", error);\n        return { message: `创建用户时出错: ${error.message || '未知错误'}`, errors: {}, success: false };\n      }\n    }\n\n    if (user && user.id) {\n      cookies().set('userId', user.id, {\n        httpOnly: true,\n        secure: process.env.NODE_ENV === 'production',\n        maxAge: MAX_AGE,\n        path: '/',\n        sameSite: 'lax',\n      });\n      // This redirect will be caught by the client and handled.\n      redirect('/dashboard');\n      // return { success: true, message: \"登录成功！即将跳转...\" }; // Not strictly necessary due to redirect\n    } else {\n      return { message: '登录或注册失败，无法找到或创建用户账户。', errors: {}, success: false };\n    }\n  } catch (error: any) {\n     if (error && typeof error === 'object' && 'digest' in error && typeof error.digest === 'string' && error.digest.startsWith('NEXT_REDIRECT')) {\n      // Re-throw NEXT_REDIRECT error to be handled by Next.js\n      throw error;\n    }\n    console.error(\"登录服务器操作发生内部错误:\", error);\n    return { message: '登录服务暂时遇到问题，请稍后再试。', errors: {}, success: false };\n  }\n}\n\n\nexport async function logout() {\n  cookies().delete('userId');\n  redirect('/login');\n}\n\nexport async function getSessionUser(): Promise<User | null> {\n  const userId = cookies().get('userId')?.value;\n  if (!userId) return null;\n  try {\n    const user = await getUserById(userId);\n    return user || null;\n  } catch (error) {\n    console.error(\"获取会话用户失败:\", error);\n    return null;\n  }\n}\n\nconst CreateEventSchema = z.object({\n  name: z.string().min(3, \"活动名称至少需要3个字符。\"),\n  date: z.string().refine((date) => !isNaN(Date.parse(date)), \"无效的日期格式。\"),\n  description: z.string().min(10, \"描述至少需要10个字符。\"),\n  participantLimit: z.preprocess(\n    (val) => (val === \"\" || val === null || val === undefined ? undefined : Number(val)),\n    z.number().int().positive().optional()\n  ),\n  cdKey: z.string().min(4, \"活动代码至少需要4个字符。\").max(20, \"活动代码最多20个字符。\"),\n  imageUrl: z.string().url(\"无效的图片链接。\").optional().or(z.literal('')),\n  userPassword: z.string().min(1, \"您的账户密码不能为空。\")\n});\n\nexport async function createEventAction(prevState: any, formData: FormData) {\n  const rawFormData = Object.fromEntries(formData.entries());\n  const validatedFields = CreateEventSchema.safeParse(rawFormData);\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: '创建活动失败。请检查所填字段。',\n      success: false,\n    };\n  }\n\n  const user = await getSessionUser();\n  if (!user) {\n    return { message: '需要认证才能创建活动。请先登录。', errors: {}, success: false };\n  }\n  if (user.op !== 1) {\n    return { message: '您没有创建活动的权限。', errors: {}, success: false };\n  }\n\n  if (!user.password || user.password !== validatedFields.data.userPassword) {\n    return {\n      errors: { ...(validatedFields.error?.flatten().fieldErrors || {}), userPassword: ['您的账户密码不正确。'] },\n      message: '创建活动失败。账户密码验证失败。',\n      success: false,\n    };\n  }\n\n  let newEventId: string | undefined;\n  try {\n    const { userPassword, ...eventDataForApi } = validatedFields.data;\n    const newEvent = await apiCreateEvent(\n        eventDataForApi as Omit<Event, 'id' | 'participants' | 'organizerId'>, \n        user.id\n    );\n    newEventId = newEvent.id;\n  } catch (error) {\n    console.error(\"创建活动错误:\", error);\n    return { message: '在服务器上创建活动失败。请稍后重试。', errors: {}, success: false };\n  }\n\n  if (newEventId) {\n    redirect(`/events/${newEventId}`);\n    // return { success: true, message: \"活动创建成功！\" }; // Not strictly necessary due to redirect\n  } else {\n    return { message: '创建活动后未能获取活动ID。', errors: {}, success: false };\n  }\n}\n\nconst UpdateEventSchema = CreateEventSchema.extend({\n  eventId: z.string().min(1, \"Event ID is required.\"),\n});\n\n\nexport async function updateEventAction(prevState: any, formData: FormData) {\n  const rawFormData = Object.fromEntries(formData.entries());\n  const validatedFields = UpdateEventSchema.safeParse(rawFormData);\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: '更新活动失败。请检查所填字段。',\n      success: false,\n    };\n  }\n\n  const user = await getSessionUser();\n  if (!user) {\n    return { message: '需要认证才能更新活动。请先登录。', errors: {}, success: false };\n  }\n  if (user.op !== 1) {\n    return { message: '您没有更新活动的权限。', errors: {}, success: false };\n  }\n   if (!user.password || user.password !== validatedFields.data.userPassword) {\n    return {\n      errors: { ...(validatedFields.error?.flatten().fieldErrors || {}), userPassword: ['您的账户密码不正确。'] },\n      message: '更新活动失败。账户密码验证失败。',\n      success: false,\n    };\n  }\n\n  try {\n    const { userPassword, eventId, ...eventDataToUpdate } = validatedFields.data;\n    const updatedEvent = await apiUpdateEventById(eventId, eventDataToUpdate as Partial<Omit<Event, 'id' | 'participants' | 'organizerId'>>);\n    if (!updatedEvent) {\n      return { message: '更新活动失败，活动未找到。', errors: { eventId: ['活动未找到。'] }, success: false };\n    }\n  } catch (error) {\n    console.error(\"更新活动错误:\", error);\n    return { message: '在服务器上更新活动失败。请稍后重试。', errors: {}, success: false };\n  }\n  redirect(`/events/${validatedFields.data.eventId}`);\n}\n\n\nexport async function deleteEventAction(eventId: string, userPassword: string): Promise<{ success: boolean, message: string }> {\n  const user = await getSessionUser();\n  if (!user) {\n    return { success: false, message: '需要认证才能删除活动。请先登录。' };\n  }\n  if (user.op !== 1) {\n    return { success: false, message: '您没有删除活动的权限。' };\n  }\n  if (!user.password || user.password !== userPassword) {\n    return { success: false, message: '您的账户密码不正确，无法删除活动。' };\n  }\n\n  try {\n    const result = await apiDeleteEventById(eventId);\n    return result;\n  } catch (error) {\n    console.error(\"删除活动错误:\", error);\n    return { success: false, message: '在服务器上删除活动失败。请稍后重试。' };\n  }\n}\n\n\nexport async function joinEventAction(eventId: string, cdKey: string) {\n  const user = await getSessionUser();\n  if (!user) {\n    return { success: false, message: '您必须登录才能加入活动。' };\n  }\n  try {\n    const result = await apiJoinEvent(user.id, eventId, cdKey);\n    return result;\n  } catch (error) {\n    console.error(\"加入活动错误:\", error);\n    return { success: false, message: '加入活动时发生服务器错误。' };\n  }\n}\n\nexport async function joinEventUsingCdKeyOnlyAction(cdKey: string): Promise<{ success: boolean, message: string, event?: Event }> {\n  const user = await getSessionUser();\n  if (!user) {\n    return { success: false, message: '您必须登录才能加入活动。' };\n  }\n\n  if (!cdKey || cdKey.trim() === '') {\n    return { success: false, message: '请输入有效的活动代码。' };\n  }\n\n  const eventToJoin = await getEventByCdKey(cdKey);\n  if (!eventToJoin) {\n    return { success: false, message: '具有此活动代码的活动未找到。' };\n  }\n\n  try {\n    const result = await apiJoinEvent(user.id, eventToJoin.id, cdKey); \n    return result;\n  } catch (error) {\n    console.error(\"使用活动代码加入活动错误:\", error);\n    return { success: false, message: '使用活动代码加入活动时发生服务器错误。' };\n  }\n}\n\n\nexport async function leaveEventAction(eventId: string) {\n  const user = await getSessionUser();\n  if (!user) {\n    return { success: false, message: '您必须登录才能离开活动。' };\n  }\n  try {\n    const result = await apiLeaveEvent(user.id, eventId);\n    return result;\n  } catch (error) {\n    console.error(\"离开活动错误:\", error);\n    return { success: false, message: '离开活动时发生服务器错误。' };\n  }\n}\n\nexport async function checkInAction(eventId: string) {\n  const user = await getSessionUser();\n  if (!user) {\n    return { success: false, message: '您必须登录才能签到。' };\n  }\n  try {\n    const result = await apiCheckInUser(user.id, eventId);\n    return result;\n  } catch (error) {\n    console.error(\"签到错误:\", error);\n    return { success: false, message: '签到过程中发生服务器错误。' };\n  }\n}\n\nexport async function getEventDetailsAction(eventId: string): Promise<Event | null> {\n  try {\n    const event = await getEventById(eventId);\n    return event || null;\n  } catch (error) {\n    console.error(\"获取活动详情错误 (action):\", error);\n    return null;\n  }\n}\n\nexport async function getEventsAction(): Promise<Event[]> {\n  try {\n    return await apiGetEvents();\n  } catch (error) {\n    console.error(\"获取所有活动失败 (action):\", error);\n    return [];\n  }\n}\n\nexport async function getUserProfile(userId: string): Promise<{ user: User; joinedEvents: Event[] } | null> {\n  const user = await getUserById(userId);\n  if (!user) {\n    console.warn(`用户个人资料未找到: ${userId}`);\n    return null;\n  }\n\n  const allEvents = await apiGetEvents(); \n  \n  const joinedEventIds = user.joinedEventIds || [];\n  const joinedEventsRaw = allEvents.filter(event => joinedEventIds.includes(event.id));\n\n  const participantUserIdsInJoinedEvents = new Set<string>();\n  joinedEventsRaw.forEach(event => {\n    (event.participants || []).forEach(p => participantUserIdsInJoinedEvents.add(p.id));\n  });\n\n  const allParticipantUsersData: User[] = [];\n   for (const pId of Array.from(participantUserIdsInJoinedEvents)) {\n    const pUser = await getUserById(pId); \n    if (pUser) {\n      allParticipantUsersData.push(pUser);\n    }\n  }\n  \n  const enrichedJoinedEvents = joinedEventsRaw.map(ev => {\n    const mainEventParticipantsEnriched = (ev.participants || []).map(p => {\n         const fullPUser = allParticipantUsersData.find(up => up.id === p.id);\n         return {\n            id: p.id,\n            username: fullPUser?.username || p.username || '未知用户',\n            avatarUrl: fullPUser?.avatarUrl || p.avatarUrl || `https://placehold.co/40x40.png?text=${(p.username || '??').substring(0,2)}`,\n            isCheckedIn: p.isCheckedIn === true, \n            op: fullPUser?.op ?? p.op ?? 0,\n            password: fullPUser?.password // Ensure password is part of participant if needed by UserAvatar or other components\n         };\n    });\n    return { ...ev, participants: mainEventParticipantsEnriched };\n  });\n\n  return {\n    user: {...user}, \n    joinedEvents: enrichedJoinedEvents.map(e => ({...e})) \n  };\n}\n\nexport async function getAnnouncementsAction(): Promise<Announcement[]> {\n  try {\n    return await apiGetAnnouncements();\n  } catch (error) {\n    console.error(\"获取公告失败 (action):\", error);\n    return [];\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;IA+BsB;IA6DA;IAKA;IAyBA;IAsDA;IAyCA;IAsBA;IAcA;IAyBA;IAcA;IAcA;IAUA;IASA;IA8CA","debugId":null}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,8OAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/edit-event/%5Bid%5D/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState, useEffect, useActionState, use } from 'react';\nimport { useFormStatus } from 'react-dom';\nimport { updateEventAction, getSessionUser, getEventDetailsAction } from '@/lib/actions';\nimport type { User, Event as EventType } from '@/lib/types';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport { AlertCircle, Loader2, Save, Home, AlertTriangle, ArrowLeft } from 'lucide-react';\nimport { useRouter } from 'next/navigation';\nimport { useLoading } from '@/contexts/loading-context';\nimport { format, parseISO } from 'date-fns';\n\n\ninterface EditEventPageProps {\n  params: { id: string };\n}\n\nfunction SubmitButton() {\n  const { pending } = useFormStatus();\n  const { startLoading } = useLoading();\n\n  useEffect(() => {\n    if (pending) {\n      startLoading();\n    }\n  }, [pending, startLoading]);\n\n  return (\n    <Button type=\"submit\" className=\"w-full\" disabled={pending}>\n      {pending ? (\n        <>\n          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> 正在保存更改...\n        </>\n      ) : (\n        <>\n          <Save className=\"mr-2 h-4 w-4\" /> 保存更改\n        </>\n      )}\n    </Button>\n  );\n}\n\nexport default function EditEventPage({ params: paramsProp }: EditEventPageProps) {\n  const params = use(paramsProp);\n  const eventId = params.id;\n  const router = useRouter();\n  const { startLoading, stopLoading } = useLoading();\n  const initialState = { message: null, errors: {}, success: false };\n\n  const [state, dispatch] = useActionState(\n    async (prevState: any, formData: FormData) => {\n      startLoading();\n      const result = await updateEventAction(prevState, formData);\n      if (result && (result.errors || (result.message && !result.success))) {\n        stopLoading();\n      }\n      return result;\n    },\n    initialState\n  );\n\n  const [currentUser, setCurrentUser] = useState<User | null>(null);\n  const [eventData, setEventData] = useState<EventType | null>(null);\n  const [isLoadingPage, setIsLoadingPage] = useState(true);\n  \n  // Default form values\n  const [defaultValues, setDefaultValues] = useState({\n    name: '',\n    date: '',\n    description: '',\n    participantLimit: '',\n    cdKey: '',\n    imageUrl: '',\n  });\n\n\n  useEffect(() => {\n    async function fetchDataAndCheckAuth() {\n      setIsLoadingPage(true);\n      startLoading();\n      try {\n        const user = await getSessionUser();\n        if (!user) {\n          router.push(`/login?redirect=/admin/edit-event/${eventId}`);\n          return;\n        }\n        setCurrentUser(user);\n        if (user.op !== 1) {\n          // Non-admin, will be handled by render logic below\n          setIsLoadingPage(false);\n          stopLoading();\n          return;\n        }\n\n        const fetchedEvent = await getEventDetailsAction(eventId);\n        if (!fetchedEvent) {\n          // Event not found, could redirect or show error\n          setEventData(null);\n          if (typeof window !== 'undefined') stopLoading(); // Ensure stopLoading on error if no redirect\n          return;\n        }\n        setEventData(fetchedEvent);\n        // Format date for datetime-local input\n        const formattedDate = fetchedEvent.date ? format(parseISO(fetchedEvent.date), \"yyyy-MM-dd'T'HH:mm\") : '';\n        setDefaultValues({\n            name: fetchedEvent.name || '',\n            date: formattedDate,\n            description: fetchedEvent.description || '',\n            participantLimit: fetchedEvent.participantLimit?.toString() || '',\n            cdKey: fetchedEvent.cdKey || '',\n            imageUrl: fetchedEvent.imageUrl || '',\n        });\n\n      } catch (error) {\n        console.error(\"Error fetching data for edit page:\", error);\n        // Handle error (e.g., show toast, redirect)\n      } finally {\n        setIsLoadingPage(false);\n        // stopLoading is called conditionally above or if this is the last path\n         if (typeof window !== 'undefined' && window.location.pathname.startsWith(`/admin/edit-event/${eventId}`)) {\n          stopLoading();\n        }\n      }\n    }\n    fetchDataAndCheckAuth();\n  }, [eventId, router, startLoading, stopLoading]);\n\n  const handleBackNavigation = () => {\n    startLoading();\n    router.back();\n  };\n  \n  const handleBackToManageEvents = () => {\n    startLoading();\n    router.push('/admin/manage-events');\n  };\n\n\n  if (isLoadingPage) {\n    return (\n      <div className=\"flex justify-center items-center min-h-[calc(100vh-15rem)]\">\n        <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n        <p className=\"ml-4 text-muted-foreground\">正在加载活动信息...</p>\n      </div>\n    );\n  }\n\n  if (!currentUser || currentUser.op !== 1) {\n    return (\n      <div className=\"max-w-2xl mx-auto py-8 text-center\">\n        <Card className=\"shadow-xl\">\n          <CardHeader><CardTitle className=\"text-2xl font-bold\">无权访问</CardTitle></CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Alert variant=\"destructive\">\n              <AlertTriangle className=\"h-4 w-4\" />\n              <AlertTitle>权限不足</AlertTitle>\n              <AlertDescription>您没有编辑活动的权限。请联系管理员。</AlertDescription>\n            </Alert>\n            <Button onClick={() => { startLoading(); router.push('/dashboard'); }} className=\"w-full sm:w-auto\">\n              <Home className=\"mr-2 h-4 w-4\" /> 返回仪表盘\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n  \n  if (!eventData) {\n     return (\n      <div className=\"max-w-2xl mx-auto py-8 text-center\">\n        <Card className=\"shadow-xl\">\n          <CardHeader><CardTitle className=\"text-2xl font-bold\">活动未找到</CardTitle></CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Alert variant=\"destructive\">\n              <AlertTriangle className=\"h-4 w-4\" />\n              <AlertTitle>错误</AlertTitle>\n              <AlertDescription>无法加载ID为 {eventId} 的活动信息。</AlertDescription>\n            </Alert>\n            <Button onClick={handleBackToManageEvents} className=\"w-full sm:w-auto\">\n              <ArrowLeft className=\"mr-2 h-4 w-4\" /> 返回活动管理\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n\n  return (\n    <div className=\"max-w-2xl mx-auto py-8\">\n      <Card className=\"shadow-xl\">\n        <CardHeader>\n          <CardTitle className=\"text-3xl font-bold\">编辑活动: {eventData.name}</CardTitle>\n          <CardDescription>修改活动的详细信息。</CardDescription>\n        </CardHeader>\n        <form action={dispatch}>\n          <input type=\"hidden\" name=\"eventId\" value={eventData.id} />\n          <CardContent className=\"space-y-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">活动名称</Label>\n              <Input id=\"name\" name=\"name\" defaultValue={defaultValues.name} placeholder=\"例如：史诗级建筑大赛\" required />\n              {state.errors?.name && <p className=\"text-sm text-destructive\">{state.errors.name[0]}</p>}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"date\">日期和时间</Label>\n              <Input id=\"date\" name=\"date\" type=\"datetime-local\" defaultValue={defaultValues.date} required />\n              {state.errors?.date && <p className=\"text-sm text-destructive\">{state.errors.date[0]}</p>}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"description\">描述 (支持 Markdown)</Label>\n              <Textarea\n                id=\"description\"\n                name=\"description\"\n                defaultValue={defaultValues.description}\n                placeholder=\"输入活动详情、规则、奖品...\"\n                rows={8}\n                required\n              />\n              {state.errors?.description && <p className=\"text-sm text-destructive\">{state.errors.description[0]}</p>}\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"participantLimit\">参与人数上限 (可选)</Label>\n                <Input id=\"participantLimit\" name=\"participantLimit\" type=\"number\" defaultValue={defaultValues.participantLimit} placeholder=\"例如：50 (无限制则留空)\" min=\"1\" />\n                {state.errors?.participantLimit && <p className=\"text-sm text-destructive\">{state.errors.participantLimit[0]}</p>}\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"cdKey\">活动代码</Label>\n                <Input id=\"cdKey\" name=\"cdKey\" defaultValue={defaultValues.cdKey} placeholder=\"创建一个唯一的活动代码\" required />\n                {state.errors?.cdKey && <p className=\"text-sm text-destructive\">{state.errors.cdKey[0]}</p>}\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"imageUrl\">图片链接 (可选)</Label>\n              <Input id=\"imageUrl\" name=\"imageUrl\" type=\"url\" defaultValue={defaultValues.imageUrl} placeholder=\"https://example.com/image.png\" />\n              {state.errors?.imageUrl && <p className=\"text-sm text-destructive\">{state.errors.imageUrl[0]}</p>}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"userPassword\">您的账户密码 (用于验证)</Label>\n              <Input id=\"userPassword\" name=\"userPassword\" type=\"password\" placeholder=\"输入您的账户密码\" required />\n              {state.errors?.userPassword && <p className=\"text-sm text-destructive\">{state.errors.userPassword[0]}</p>}\n            </div>\n            \n            {state.message && state.success && (\n              <p className=\"text-sm text-green-600 flex items-center\"><AlertCircle className=\"w-4 h-4 mr-1\"/> {state.message}</p>\n            )}\n            {state.message && !state.success && (!state.errors || Object.keys(state.errors).length === 0) && ( \n              <p className=\"text-sm text-destructive flex items-center\"><AlertCircle className=\"w-4 h-4 mr-1\"/> {state.message}</p>\n            )}\n             {state.message && state.errors && Object.keys(state.errors).length > 0 && !state.errors.userPassword && (\n              <p className=\"text-sm text-destructive flex items-center\"><AlertCircle className=\"w-4 h-4 mr-1\"/> {state.message}</p>\n            )}\n          </CardContent>\n          <CardFooter className=\"flex flex-col sm:flex-row gap-2\">\n            <SubmitButton />\n            <Button variant=\"outline\" onClick={handleBackNavigation} className=\"w-full sm:w-auto\">\n                <ArrowLeft className=\"mr-2 h-4 w-4\" /> 返回\n            </Button>\n          </CardFooter>\n        </form>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAfA;;;;;;;;;;;;;;;AAsBA,SAAS;IACP,MAAM,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,4MAAA,CAAA,gBAAa,AAAD;IAChC,MAAM,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,sIAAA,CAAA,aAAU,AAAD;IAElC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,SAAS;YACX;QACF;IACF,GAAG;QAAC;QAAS;KAAa;IAE1B,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAK;QAAS,WAAU;QAAS,UAAU;kBAChD,wBACC;;8BACE,8OAAC,iNAAA,CAAA,UAAO;oBAAC,WAAU;;;;;;gBAA8B;;yCAGnD;;8BACE,8OAAC,kMAAA,CAAA,OAAI;oBAAC,WAAU;;;;;;gBAAiB;;;;;;;;AAK3C;AAEe,SAAS,cAAc,EAAE,QAAQ,UAAU,EAAsB;IAC9E,MAAM,SAAS,CAAA,GAAA,qMAAA,CAAA,MAAG,AAAD,EAAE;IACnB,MAAM,UAAU,OAAO,EAAE;IACzB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,sIAAA,CAAA,aAAU,AAAD;IAC/C,MAAM,eAAe;QAAE,SAAS;QAAM,QAAQ,CAAC;QAAG,SAAS;IAAM;IAEjE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,iBAAc,AAAD,EACrC,OAAO,WAAgB;QACrB;QACA,MAAM,SAAS,MAAM,CAAA,GAAA,qHAAA,CAAA,oBAAiB,AAAD,EAAE,WAAW;QAClD,IAAI,UAAU,CAAC,OAAO,MAAM,IAAK,OAAO,OAAO,IAAI,CAAC,OAAO,OAAO,AAAC,GAAG;YACpE;QACF;QACA,OAAO;IACT,GACA;IAGF,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC5D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAoB;IAC7D,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnD,sBAAsB;IACtB,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QACjD,MAAM;QACN,MAAM;QACN,aAAa;QACb,kBAAkB;QAClB,OAAO;QACP,UAAU;IACZ;IAGA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,eAAe;YACb,iBAAiB;YACjB;YACA,IAAI;gBACF,MAAM,OAAO,MAAM,CAAA,GAAA,qHAAA,CAAA,iBAAc,AAAD;gBAChC,IAAI,CAAC,MAAM;oBACT,OAAO,IAAI,CAAC,CAAC,kCAAkC,EAAE,SAAS;oBAC1D;gBACF;gBACA,eAAe;gBACf,IAAI,KAAK,EAAE,KAAK,GAAG;oBACjB,mDAAmD;oBACnD,iBAAiB;oBACjB;oBACA;gBACF;gBAEA,MAAM,eAAe,MAAM,CAAA,GAAA,qHAAA,CAAA,wBAAqB,AAAD,EAAE;gBACjD,IAAI,CAAC,cAAc;oBACjB,gDAAgD;oBAChD,aAAa;oBACb,uCAAmC;;oBAAa,EAAE,6CAA6C;oBAC/F;gBACF;gBACA,aAAa;gBACb,uCAAuC;gBACvC,MAAM,gBAAgB,aAAa,IAAI,GAAG,CAAA,GAAA,sJAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,wIAAA,CAAA,WAAQ,AAAD,EAAE,aAAa,IAAI,GAAG,wBAAwB;gBACtG,iBAAiB;oBACb,MAAM,aAAa,IAAI,IAAI;oBAC3B,MAAM;oBACN,aAAa,aAAa,WAAW,IAAI;oBACzC,kBAAkB,aAAa,gBAAgB,EAAE,cAAc;oBAC/D,OAAO,aAAa,KAAK,IAAI;oBAC7B,UAAU,aAAa,QAAQ,IAAI;gBACvC;YAEF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sCAAsC;YACpD,4CAA4C;YAC9C,SAAU;gBACR,iBAAiB;gBACjB,wEAAwE;gBACvE,IAAI,gBAAkB,eAAe,OAAO,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,kBAAkB,EAAE,SAAS,GAAG;;gBAE3G;YACF;QACF;QACA;IACF,GAAG;QAAC;QAAS;QAAQ;QAAc;KAAY;IAE/C,MAAM,uBAAuB;QAC3B;QACA,OAAO,IAAI;IACb;IAEA,MAAM,2BAA2B;QAC/B;QACA,OAAO,IAAI,CAAC;IACd;IAGA,IAAI,eAAe;QACjB,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,iNAAA,CAAA,UAAO;oBAAC,WAAU;;;;;;8BACnB,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;IAGhD;IAEA,IAAI,CAAC,eAAe,YAAY,EAAE,KAAK,GAAG;QACxC,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,gIAAA,CAAA,OAAI;gBAAC,WAAU;;kCACd,8OAAC,gIAAA,CAAA,aAAU;kCAAC,cAAA,8OAAC,gIAAA,CAAA,YAAS;4BAAC,WAAU;sCAAqB;;;;;;;;;;;kCACtD,8OAAC,gIAAA,CAAA,cAAW;wBAAC,WAAU;;0CACrB,8OAAC,iIAAA,CAAA,QAAK;gCAAC,SAAQ;;kDACb,8OAAC,wNAAA,CAAA,gBAAa;wCAAC,WAAU;;;;;;kDACzB,8OAAC,iIAAA,CAAA,aAAU;kDAAC;;;;;;kDACZ,8OAAC,iIAAA,CAAA,mBAAgB;kDAAC;;;;;;;;;;;;0CAEpB,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAS;oCAAQ;oCAAgB,OAAO,IAAI,CAAC;gCAAe;gCAAG,WAAU;;kDAC/E,8OAAC,mMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;;IAM7C;IAEA,IAAI,CAAC,WAAW;QACb,qBACC,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,gIAAA,CAAA,OAAI;gBAAC,WAAU;;kCACd,8OAAC,gIAAA,CAAA,aAAU;kCAAC,cAAA,8OAAC,gIAAA,CAAA,YAAS;4BAAC,WAAU;sCAAqB;;;;;;;;;;;kCACtD,8OAAC,gIAAA,CAAA,cAAW;wBAAC,WAAU;;0CACrB,8OAAC,iIAAA,CAAA,QAAK;gCAAC,SAAQ;;kDACb,8OAAC,wNAAA,CAAA,gBAAa;wCAAC,WAAU;;;;;;kDACzB,8OAAC,iIAAA,CAAA,aAAU;kDAAC;;;;;;kDACZ,8OAAC,iIAAA,CAAA,mBAAgB;;4CAAC;4CAAS;4CAAQ;;;;;;;;;;;;;0CAErC,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAS;gCAA0B,WAAU;;kDACnD,8OAAC,gNAAA,CAAA,YAAS;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;;IAMlD;IAGA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,gIAAA,CAAA,OAAI;YAAC,WAAU;;8BACd,8OAAC,gIAAA,CAAA,aAAU;;sCACT,8OAAC,gIAAA,CAAA,YAAS;4BAAC,WAAU;;gCAAqB;gCAAO,UAAU,IAAI;;;;;;;sCAC/D,8OAAC,gIAAA,CAAA,kBAAe;sCAAC;;;;;;;;;;;;8BAEnB,8OAAC;oBAAK,QAAQ;;sCACZ,8OAAC;4BAAM,MAAK;4BAAS,MAAK;4BAAU,OAAO,UAAU,EAAE;;;;;;sCACvD,8OAAC,gIAAA,CAAA,cAAW;4BAAC,WAAU;;8CACrB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,iIAAA,CAAA,QAAK;4CAAC,SAAQ;sDAAO;;;;;;sDACtB,8OAAC,iIAAA,CAAA,QAAK;4CAAC,IAAG;4CAAO,MAAK;4CAAO,cAAc,cAAc,IAAI;4CAAE,aAAY;4CAAa,QAAQ;;;;;;wCAC/F,MAAM,MAAM,EAAE,sBAAQ,8OAAC;4CAAE,WAAU;sDAA4B,MAAM,MAAM,CAAC,IAAI,CAAC,EAAE;;;;;;;;;;;;8CAGtF,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,iIAAA,CAAA,QAAK;4CAAC,SAAQ;sDAAO;;;;;;sDACtB,8OAAC,iIAAA,CAAA,QAAK;4CAAC,IAAG;4CAAO,MAAK;4CAAO,MAAK;4CAAiB,cAAc,cAAc,IAAI;4CAAE,QAAQ;;;;;;wCAC5F,MAAM,MAAM,EAAE,sBAAQ,8OAAC;4CAAE,WAAU;sDAA4B,MAAM,MAAM,CAAC,IAAI,CAAC,EAAE;;;;;;;;;;;;8CAGtF,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,iIAAA,CAAA,QAAK;4CAAC,SAAQ;sDAAc;;;;;;sDAC7B,8OAAC,oIAAA,CAAA,WAAQ;4CACP,IAAG;4CACH,MAAK;4CACL,cAAc,cAAc,WAAW;4CACvC,aAAY;4CACZ,MAAM;4CACN,QAAQ;;;;;;wCAET,MAAM,MAAM,EAAE,6BAAe,8OAAC;4CAAE,WAAU;sDAA4B,MAAM,MAAM,CAAC,WAAW,CAAC,EAAE;;;;;;;;;;;;8CAGpG,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,iIAAA,CAAA,QAAK;oDAAC,SAAQ;8DAAmB;;;;;;8DAClC,8OAAC,iIAAA,CAAA,QAAK;oDAAC,IAAG;oDAAmB,MAAK;oDAAmB,MAAK;oDAAS,cAAc,cAAc,gBAAgB;oDAAE,aAAY;oDAAiB,KAAI;;;;;;gDACjJ,MAAM,MAAM,EAAE,kCAAoB,8OAAC;oDAAE,WAAU;8DAA4B,MAAM,MAAM,CAAC,gBAAgB,CAAC,EAAE;;;;;;;;;;;;sDAE9G,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,iIAAA,CAAA,QAAK;oDAAC,SAAQ;8DAAQ;;;;;;8DACvB,8OAAC,iIAAA,CAAA,QAAK;oDAAC,IAAG;oDAAQ,MAAK;oDAAQ,cAAc,cAAc,KAAK;oDAAE,aAAY;oDAAc,QAAQ;;;;;;gDACnG,MAAM,MAAM,EAAE,uBAAS,8OAAC;oDAAE,WAAU;8DAA4B,MAAM,MAAM,CAAC,KAAK,CAAC,EAAE;;;;;;;;;;;;;;;;;;8CAI1F,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,iIAAA,CAAA,QAAK;4CAAC,SAAQ;sDAAW;;;;;;sDAC1B,8OAAC,iIAAA,CAAA,QAAK;4CAAC,IAAG;4CAAW,MAAK;4CAAW,MAAK;4CAAM,cAAc,cAAc,QAAQ;4CAAE,aAAY;;;;;;wCACjG,MAAM,MAAM,EAAE,0BAAY,8OAAC;4CAAE,WAAU;sDAA4B,MAAM,MAAM,CAAC,QAAQ,CAAC,EAAE;;;;;;;;;;;;8CAG9F,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,iIAAA,CAAA,QAAK;4CAAC,SAAQ;sDAAe;;;;;;sDAC9B,8OAAC,iIAAA,CAAA,QAAK;4CAAC,IAAG;4CAAe,MAAK;4CAAe,MAAK;4CAAW,aAAY;4CAAW,QAAQ;;;;;;wCAC3F,MAAM,MAAM,EAAE,8BAAgB,8OAAC;4CAAE,WAAU;sDAA4B,MAAM,MAAM,CAAC,YAAY,CAAC,EAAE;;;;;;;;;;;;gCAGrG,MAAM,OAAO,IAAI,MAAM,OAAO,kBAC7B,8OAAC;oCAAE,WAAU;;sDAA2C,8OAAC,oNAAA,CAAA,cAAW;4CAAC,WAAU;;;;;;wCAAgB;wCAAE,MAAM,OAAO;;;;;;;gCAE/G,MAAM,OAAO,IAAI,CAAC,MAAM,OAAO,IAAI,CAAC,CAAC,MAAM,MAAM,IAAI,OAAO,IAAI,CAAC,MAAM,MAAM,EAAE,MAAM,KAAK,CAAC,mBAC1F,8OAAC;oCAAE,WAAU;;sDAA6C,8OAAC,oNAAA,CAAA,cAAW;4CAAC,WAAU;;;;;;wCAAgB;wCAAE,MAAM,OAAO;;;;;;;gCAEhH,MAAM,OAAO,IAAI,MAAM,MAAM,IAAI,OAAO,IAAI,CAAC,MAAM,MAAM,EAAE,MAAM,GAAG,KAAK,CAAC,MAAM,MAAM,CAAC,YAAY,kBACnG,8OAAC;oCAAE,WAAU;;sDAA6C,8OAAC,oNAAA,CAAA,cAAW;4CAAC,WAAU;;;;;;wCAAgB;wCAAE,MAAM,OAAO;;;;;;;;;;;;;sCAGpH,8OAAC,gIAAA,CAAA,aAAU;4BAAC,WAAU;;8CACpB,8OAAC;;;;;8CACD,8OAAC,kIAAA,CAAA,SAAM;oCAAC,SAAQ;oCAAU,SAAS;oCAAsB,WAAU;;sDAC/D,8OAAC,gNAAA,CAAA,YAAS;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtD","debugId":null}}]
}