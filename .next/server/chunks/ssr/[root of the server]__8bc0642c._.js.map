{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/data.ts"],"sourcesContent":["\nimport fs from 'fs/promises';\nimport path from 'path';\nimport type { Event, User, Participant, Announcement } from './types';\nimport { parseISO } from 'date-fns';\n\nconst DATA_DIR = path.join(process.cwd(), 'data');\nconst USERS_FILE = path.join(DATA_DIR, 'users.json');\nconst EVENTS_FILE = path.join(DATA_DIR, 'events.json');\nconst ABOUT_USER_FILE = path.join(DATA_DIR, 'about-user.json');\n\nconst defaultUsers: User[] = [\n    { id: 'Steve', username: 'Steve', avatarUrl: `https://placehold.co/100x100.png?text=St`, joinedEventIds: ['event1', 'event2'], op: 0, password: '123456' },\n    { id: 'Alex', username: 'Alex', avatarUrl: `https://placehold.co/100x100.png?text=Al`, joinedEventIds: ['event2'], op: 0, password: '123456' },\n    { id: 'Notch', username: 'Notch', avatarUrl: `https://placehold.co/100x100.png?text=No`, joinedEventIds: [], op: 1, password: '123456' },\n    { id: 'dream_pep_id', username: 'dream_pep', avatarUrl: `https://placehold.co/100x100.png?text=dr`, joinedEventIds: ['event1', 'event3'], op: 1, password: '123456' }\n];\n\nconst defaultEvents: Event[] = [\n    {\n        id: 'event1', name: '生存游戏锦标赛', date: '2024-07-29T12:00:00.000Z',\n        description: \"\\n### 欢迎参加年度生存游戏！\\n证明你的勇气，成为最后的幸存者。\\n**规则：**\\n- 禁止作弊\\n- 联盟是暂时的\\n- 玩得开心！\\n**奖品：**\\n- 第一名：钻石奖杯\\n- 第二名：金锭\\n- 第三名：铁制工具\\n\",\n        participantLimit: 24,\n        participants: [\n             { id: 'Steve', username: 'Steve', avatarUrl: `https://placehold.co/100x100.png?text=St`, isCheckedIn: false, op: 0, password: '123456' },\n             { id: 'dream_pep_id', username: 'dream_pep', avatarUrl: `https://placehold.co/100x100.png?text=dr`, isCheckedIn: false, op: 1, password: '123456' }\n        ],\n        cdKey: 'SURVIVAL2024', imageUrl: `https://placehold.co/800x400.png`, organizerId: 'Notch',\n    },\n    {\n        id: 'event2', name: '创意建筑大赛', date: '2024-07-22T12:00:00.000Z',\n        description: \"\\n## 展示你的建筑技巧！\\n主题：**中世纪城堡**\\n在时限内建造最令人印象深刻的城堡。\\n评分标准：\\n- 创意\\n- 细节\\n- 规模\\n\",\n        participantLimit: 50,\n        participants: [\n            { id: 'Steve', username: 'Steve', avatarUrl: `https://placehold.co/100x100.png?text=St`, isCheckedIn: true, op: 0, password: '123456' },\n            { id: 'Alex', username: 'Alex', avatarUrl: `https://placehold.co/100x100.png?text=Al`, isCheckedIn: false, op: 0, password: '123456' },\n        ],\n        cdKey: 'BUILDMC2024', imageUrl: `https://placehold.co/800x400.png`, organizerId: 'Notch',\n    },\n    {\n        id: 'event3', name: '跑酷挑战赛', date: '2024-07-08T12:00:00.000Z',\n        description: '在我们迄今为止最难的跑酷地图中测试你的敏捷性。完成即可获得奖励！',\n        participants: [ { id: 'dream_pep_id', username: 'dream_pep', avatarUrl: `https://placehold.co/100x100.png?text=dr`, isCheckedIn: true, op: 1, password: '123456' } ],\n        cdKey: 'PARKOURX', imageUrl: `https://placehold.co/800x400.png`, organizerId: 'Notch',\n    },\n     {\n        id: 'event4', name: '红石装置展览会', date: '2024-08-21T12:00:00.000Z',\n        description: '展示你最巧妙的红石发明。创新是关键！', participantLimit: 10, participants: [],\n        cdKey: 'REDSTONEFAI', imageUrl: `https://placehold.co/800x400.png`, organizerId: 'Notch',\n    },\n];\n\nconst defaultAnnouncements: Announcement[] = [\n  { id: 'announce1', title: '欢迎来到 MineVent!', content: '发现、加入并创建精彩的《我的世界》活动。祝您玩得愉快！', date: new Date().toISOString() },\n  { id: 'announce2', title: '新功能：仪表盘公告', content: '现在您可以在仪表盘查阅最新公告了。', date: new Date(Date.now() - 86400000).toISOString() }, // Approx. 1 day ago\n];\n\n\nasync function initializeFile<T>(filePath: string, defaultContent: T[], fileNameForLog: string): Promise<T[]> {\n  try {\n    await fs.access(DATA_DIR);\n  } catch (error) {\n    try {\n      await fs.mkdir(DATA_DIR, { recursive: true });\n    } catch (mkdirError) {\n      console.error(`CRITICAL: Failed to create data directory ${DATA_DIR} for ${fileNameForLog}. Returning in-memory defaults.`, mkdirError);\n      return defaultContent.map(item => ({...item}));\n    }\n  }\n\n  try {\n    const fileContent = await fs.readFile(filePath, 'utf-8');\n    const data = JSON.parse(fileContent);\n    if (!Array.isArray(data) || (Array.isArray(data) && data.length === 0 && defaultContent.length > 0)) {\n      console.warn(`${fileNameForLog} is empty or not a valid array. Attempting to initialize with default data.`);\n      try {\n        await fs.writeFile(filePath, JSON.stringify(defaultContent, null, 2), 'utf-8');\n      } catch (writeError) {\n        console.error(`CRITICAL: Failed to write ${fileNameForLog} during initialization. Proceeding with in-memory defaults. Error: ${writeError instanceof Error ? writeError.message : String(writeError)}`);\n        return defaultContent.map(item => ({...item}));\n      }\n      return defaultContent.map(item => ({...item}));\n    }\n    return data.map((item: any) => ({...item}));\n  } catch (error) {\n    console.warn(`Error reading/parsing ${fileNameForLog}, or file not found. Attempting to initialize with default data. Error: ${error instanceof Error ? error.message : String(error)}`);\n    try {\n      await fs.writeFile(filePath, JSON.stringify(defaultContent, null, 2), 'utf-8');\n    } catch (writeError) {\n      console.error(`CRITICAL: Failed to write ${fileNameForLog} during recovery initialization. Proceeding with in-memory defaults. Error: ${writeError instanceof Error ? writeError.message : String(writeError)}`);\n      return defaultContent.map(item => ({...item}));\n    }\n    return defaultContent.map(item => ({...item}));\n  }\n}\n\nasync function initializeUsersFile(): Promise<User[]> {\n  const filePath = USERS_FILE;\n  const fileNameForLog = 'users.json';\n  let usersFromFile: User[] = [];\n  let needsWrite = false;\n\n  try {\n    await fs.access(DATA_DIR);\n  } catch (error) {\n    try {\n      await fs.mkdir(DATA_DIR, { recursive: true });\n    } catch (mkdirError) {\n        console.error(`CRITICAL: Failed to create data directory ${DATA_DIR}. Returning in-memory default users.`, mkdirError);\n        return defaultUsers.map(u => ({...u}));\n    }\n    console.warn(`${fileNameForLog} not found (data directory created). Initializing with default users.`);\n    usersFromFile = defaultUsers.map(u => ({...u}));\n    needsWrite = true;\n  }\n\n  if (!needsWrite) {\n    try {\n      const fileContent = await fs.readFile(filePath, 'utf-8');\n      const parsedData = JSON.parse(fileContent);\n\n      if (!Array.isArray(parsedData)) {\n        console.warn(`${fileNameForLog} content is not a valid array. Initializing with default users.`);\n        usersFromFile = defaultUsers.map(u => ({...u}));\n        needsWrite = true;\n      } else if (parsedData.length === 0 && defaultUsers.length > 0) {\n        console.warn(`${fileNameForLog} was an empty array. Initializing with default users.`);\n        usersFromFile = defaultUsers.map(u => ({...u}));\n        needsWrite = true;\n      } else {\n        usersFromFile = parsedData.map((u: any) => ({...u}));\n        defaultUsers.forEach(defaultUser => {\n          if (!usersFromFile.some(u => u.id === defaultUser.id)) {\n            console.warn(`Default user ${defaultUser.username} (ID: ${defaultUser.id}) missing from ${fileNameForLog}. Adding.`);\n            usersFromFile.push({...defaultUser});\n            needsWrite = true;\n          }\n        });\n        usersFromFile.forEach(user => {\n          let userModified = false;\n          if (user.op === undefined) { user.op = 0; userModified = true; }\n          if (!Array.isArray(user.joinedEventIds)) { user.joinedEventIds = []; userModified = true; }\n          if (!user.avatarUrl && user.username) {\n             user.avatarUrl = `https://placehold.co/100x100.png?text=${user.username.substring(0, 2).toUpperCase()}`;\n             userModified = true;\n          }\n          if (user.password === undefined) {\n             const defaultRefUser = defaultUsers.find(du => du.id === user.id);\n             user.password = defaultRefUser?.password || '123456'; // Fallback password\n             userModified = true;\n          }\n          if (userModified) {\n            needsWrite = true;\n          }\n        });\n      }\n    } catch (error) {\n      console.warn(`Error reading/parsing ${fileNameForLog}, or file not found. Initializing with default users. Error: ${error instanceof Error ? error.message : String(error)}`);\n      usersFromFile = defaultUsers.map(u => ({...u}));\n      needsWrite = true;\n    }\n  }\n\n  if (needsWrite) {\n    try {\n      await fs.writeFile(filePath, JSON.stringify(usersFromFile, null, 2), 'utf-8');\n    } catch (writeError) {\n      console.error(`CRITICAL: Failed to write ${fileNameForLog} during initialization/update. Proceeding with in-memory version. Error: ${writeError instanceof Error ? writeError.message : String(writeError)}`);\n    }\n  }\n  return usersFromFile.map(u => ({...u}));\n}\n\n\nlet usersCache: User[] | null = null;\nlet eventsCache: Event[] | null = null;\nlet announcementsCache: Announcement[] | null = null;\nlet lastUsersReadTime = 0;\nlet lastEventsReadTime = 0;\nlet lastAnnouncementsReadTime = 0;\nconst CACHE_DURATION = 500; // Reduced for more frequent checks during dev\n\nasync function ensureDataFilesInitialized() {\n    const currentTime = Date.now();\n\n    try {\n        if (!usersCache || (currentTime - lastUsersReadTime > CACHE_DURATION)) {\n            usersCache = await initializeUsersFile();\n            lastUsersReadTime = currentTime;\n        }\n    } catch (e) {\n        console.error(\"CRITICAL: Error during initializeUsersFile. Falling back to default users for cache.\", e);\n        usersCache = defaultUsers.map(u => ({...u}));\n        lastUsersReadTime = currentTime;\n    }\n\n    try {\n        if (!eventsCache || (currentTime - lastEventsReadTime > CACHE_DURATION)) {\n            eventsCache = await initializeFile<Event>(EVENTS_FILE, defaultEvents, 'events.json');\n            lastEventsReadTime = currentTime;\n        }\n    } catch (e) {\n        console.error(\"CRITICAL: Error during initializeFile for events. Falling back to default events for cache.\", e);\n        eventsCache = defaultEvents.map(ev => ({...ev}));\n        lastEventsReadTime = currentTime;\n    }\n\n    try {\n        if (!announcementsCache || (currentTime - lastAnnouncementsReadTime > CACHE_DURATION)) {\n            announcementsCache = await initializeFile<Announcement>(ABOUT_USER_FILE, defaultAnnouncements, 'about-user.json');\n            lastAnnouncementsReadTime = currentTime;\n        }\n    } catch (e) {\n        console.error(\"CRITICAL: Error during initializeFile for announcements. Falling back to default announcements for cache.\", e);\n        announcementsCache = defaultAnnouncements.map(a => ({...a}));\n        lastAnnouncementsReadTime = currentTime;\n    }\n}\n\n\nasync function readData<T>(filePath: string): Promise<T[]> {\n  await ensureDataFilesInitialized(); \n\n  if (filePath === USERS_FILE && usersCache) return usersCache.map(u => ({...u})) as T[];\n  if (filePath === EVENTS_FILE && eventsCache) return eventsCache.map(e => ({...e})) as T[];\n  if (filePath === ABOUT_USER_FILE && announcementsCache) return announcementsCache.map(a => ({...a})) as T[];\n\n  console.warn(`Cache miss for ${filePath} after ensureDataFilesInitialized. Reading directly as fallback.`);\n  try {\n    const jsonData = await fs.readFile(filePath, 'utf-8');\n    const data = JSON.parse(jsonData);\n    if (!Array.isArray(data)) {\n        console.warn(`Data in ${filePath} is not an array. Returning appropriate default.`);\n        if (filePath === USERS_FILE) return defaultUsers.map(u => ({...u})) as T[];\n        if (filePath === EVENTS_FILE) return defaultEvents.map(e => ({...e})) as T[];\n        if (filePath === ABOUT_USER_FILE) return defaultAnnouncements.map(a => ({...a})) as T[];\n        return [];\n    }\n    return data.map((item: any) => ({...item}));\n  } catch (error: any) {\n    console.error(`CRITICAL: Unexpected error reading data from ${filePath} during direct read fallback:`, error);\n    if (filePath === USERS_FILE) return defaultUsers.map(u => ({...u})) as T[];\n    if (filePath === EVENTS_FILE) return defaultEvents.map(e => ({...e})) as T[];\n    if (filePath === ABOUT_USER_FILE) return defaultAnnouncements.map(a => ({...a})) as T[];\n    return [];\n  }\n}\n\nasync function writeData<T>(filePath: string, data: T[]): Promise<void> {\n  try {\n    await fs.access(DATA_DIR);\n  } catch (error) {\n    try {\n      await fs.mkdir(DATA_DIR, { recursive: true });\n    } catch (mkdirError) {\n      console.error(`CRITICAL: Failed to create data directory ${DATA_DIR} during write for ${filePath}.`, mkdirError);\n      throw mkdirError;\n    }\n  }\n\n  try {\n    const jsonData = JSON.stringify(data, null, 2);\n    await fs.writeFile(filePath, jsonData, 'utf-8');\n    const currentTime = Date.now();\n    if (filePath === USERS_FILE) { usersCache = data.map(u => ({...(u as any)})); lastUsersReadTime = currentTime; }\n    if (filePath === EVENTS_FILE) { eventsCache = data.map(e => ({...(e as any)})); lastEventsReadTime = currentTime; }\n    if (filePath === ABOUT_USER_FILE) { announcementsCache = data.map(a => ({...(a as any)})); lastAnnouncementsReadTime = currentTime; }\n  } catch (error) {\n    console.error(`写入数据错误 ${filePath}:`, error);\n    throw error;\n  }\n}\n\n// --- Event Functions ---\nexport async function getEvents(): Promise<Event[]> {\n  return readData<Event>(EVENTS_FILE);\n}\n\nexport async function getEventById(id: string): Promise<Event | undefined> {\n  const events = await readData<Event>(EVENTS_FILE);\n  return events.find(e => e.id === id);\n}\n\nexport async function getEventByCdKey(cdKey: string): Promise<Event | undefined> {\n  const events = await readData<Event>(EVENTS_FILE);\n  return events.find(e => e.cdKey.toLowerCase() === cdKey.toLowerCase());\n}\n\nexport async function createEvent(eventData: Omit<Event, 'id' | 'participants' | 'organizerId'>, organizerId: string): Promise<Event> {\n  const events = await readData<Event>(EVENTS_FILE);\n  const newEvent: Event = {\n    ...eventData,\n    id: `event_${Date.now()}_${Math.random().toString(36).substring(2, 7)}`,\n    participants: [],\n    organizerId,\n  };\n  events.push(newEvent);\n  await writeData<Event>(EVENTS_FILE, events);\n  return {...newEvent};\n}\n\nexport async function updateEventById(eventId: string, eventData: Partial<Omit<Event, 'id' | 'participants' | 'organizerId'>>): Promise<Event | null> {\n  let events = await readData<Event>(EVENTS_FILE);\n  const eventIndex = events.findIndex(e => e.id === eventId);\n  if (eventIndex === -1) {\n    return null;\n  }\n  // Only update allowed fields, preserve participants, id, organizerId\n  events[eventIndex] = {\n    ...events[eventIndex],\n    ...eventData,\n    id: events[eventIndex].id, // ensure id is not changed\n    participants: events[eventIndex].participants, // ensure participants are not changed\n    organizerId: events[eventIndex].organizerId, // ensure organizerId is not changed\n  };\n  await writeData<Event>(EVENTS_FILE, events);\n  return {...events[eventIndex]};\n}\n\nexport async function deleteEventById(eventId: string): Promise<{ success: boolean, message: string }> {\n  let events = await readData<Event>(EVENTS_FILE);\n  const initialEventCount = events.length;\n  events = events.filter(e => e.id !== eventId);\n\n  if (events.length === initialEventCount) {\n    return { success: false, message: \"活动未找到，无法删除。\" };\n  }\n\n  await writeData<Event>(EVENTS_FILE, events);\n\n  // Remove this eventId from all users' joinedEventIds\n  let users = await readData<User>(USERS_FILE);\n  users = users.map(user => {\n    if (user.joinedEventIds && user.joinedEventIds.includes(eventId)) {\n      return {\n        ...user,\n        joinedEventIds: user.joinedEventIds.filter(id => id !== eventId),\n      };\n    }\n    return user;\n  });\n  await writeData<User>(USERS_FILE, users);\n\n  return { success: true, message: \"活动已成功删除。\" };\n}\n\n\nexport async function joinEvent(userId: string, eventId: string, cdKey: string): Promise<{ success: boolean, message: string, event?: Event }> {\n  let events = await readData<Event>(EVENTS_FILE);\n  let users = await readData<User>(USERS_FILE);\n\n  const eventIndex = events.findIndex(e => e.id === eventId);\n  if (eventIndex === -1) return { success: false, message: '活动未找到。' };\n  const event = events[eventIndex];\n\n  const userIndex = users.findIndex(u => u.id === userId);\n  if (userIndex === -1) return { success: false, message: '用户未找到。' };\n  const user = users[userIndex];\n\n  if (event.cdKey.toLowerCase() !== cdKey.toLowerCase()) return { success: false, message: '无效的活动代码。' };\n  if (event.participantLimit && event.participants.length >= event.participantLimit) {\n    return { success: false, message: '活动人数已满。' };\n  }\n  if (event.participants.some(p => p.id === userId)) {\n    return { success: true, message: '您已加入此活动。', event: {...event} };\n  }\n\n  const participant: Participant = {\n    id: user.id,\n    username: user.username,\n    avatarUrl: user.avatarUrl,\n    isCheckedIn: false,\n    op: user.op || 0,\n    password: user.password\n  };\n  event.participants.push(participant);\n\n  if (!user.joinedEventIds) user.joinedEventIds = [];\n  if (!user.joinedEventIds.includes(eventId)) user.joinedEventIds.push(eventId);\n\n  events[eventIndex] = event;\n  users[userIndex] = user;\n\n  await writeData<Event>(EVENTS_FILE, events);\n  await writeData<User>(USERS_FILE, users);\n\n  return { success: true, message: '成功加入活动！', event: {...events[eventIndex]} };\n}\n\nexport async function leaveEvent(userId: string, eventId: string): Promise<{ success: boolean, message: string, event?: Event }> {\n  let events = await readData<Event>(EVENTS_FILE);\n  let users = await readData<User>(USERS_FILE);\n\n  const eventIndex = events.findIndex(e => e.id === eventId);\n  if (eventIndex === -1) return { success: false, message: '活动未找到。' };\n  const event = events[eventIndex];\n\n  const userIndex = users.findIndex(u => u.id === userId);\n  if (userIndex === -1) return { success: false, message: '用户未找到。' };\n  const user = users[userIndex];\n\n  const participantIndexInEvent = event.participants.findIndex(p => p.id === userId);\n\n  if (participantIndexInEvent === -1) {\n    if (user.joinedEventIds && user.joinedEventIds.includes(eventId)) {\n        user.joinedEventIds = user.joinedEventIds.filter(id => id !== eventId);\n        users[userIndex] = user;\n        await writeData<User>(USERS_FILE, users);\n        return { success: true, message: '已从您的活动列表中移除。您并未实际参加此活动。', event: {...events[eventIndex]} };\n    }\n    return { success: false, message: '您当前未加入此活动。' };\n  }\n\n  event.participants.splice(participantIndexInEvent, 1);\n\n  if (user.joinedEventIds) user.joinedEventIds = user.joinedEventIds.filter(id => id !== eventId);\n\n  events[eventIndex] = event;\n  users[userIndex] = user;\n\n  await writeData<Event>(EVENTS_FILE, events);\n  await writeData<User>(USERS_FILE, users);\n\n  return { success: true, message: '成功离开活动。', event: {...events[eventIndex]} };\n}\n\nexport async function checkInUser(userId: string, eventId: string): Promise<{ success: boolean, message: string }> {\n  let events = await readData<Event>(EVENTS_FILE);\n  const eventIndex = events.findIndex(e => e.id === eventId);\n\n  if (eventIndex === -1) return { success: false, message: '活动未找到。' };\n  const event = events[eventIndex];\n\n  const participantIndexInEvent = event.participants.findIndex(p => p.id === userId);\n  if (participantIndexInEvent === -1) return { success: false, message: '您未报名参加此活动。' };\n\n  const participant = event.participants[participantIndexInEvent];\n  if (participant.isCheckedIn) return { success: true, message: '您已签到。' };\n\n  const eventDate = parseISO(event.date);\n  const today = new Date();\n  const isCurrent = eventDate.getFullYear() === today.getFullYear() &&\n                    eventDate.getMonth() === today.getMonth() &&\n                    eventDate.getDate() === today.getDate();\n\n  if (!isCurrent) {\n    return { success: false, message: '此活动的签到尚未开始或已结束。' };\n  }\n\n  participant.isCheckedIn = true;\n  event.participants[participantIndexInEvent] = participant;\n  events[eventIndex] = event;\n\n  await writeData<Event>(EVENTS_FILE, events);\n  return { success: true, message: '签到成功！' };\n}\n\n// --- User Functions ---\nexport async function getUserById(userId: string): Promise<User | undefined> {\n  const users = await readData<User>(USERS_FILE);\n  return users.find(u => u.id === userId);\n}\n\nexport async function getUserByUsername(username: string): Promise<User | undefined> {\n  const users = await readData<User>(USERS_FILE);\n  return users.find(u => u.username.toLowerCase() === username.toLowerCase());\n}\n\nexport async function createUser(userData: Omit<User, 'op' | 'joinedEventIds' | 'avatarUrl'> & { password?: string }): Promise<User> {\n  const users = await readData<User>(USERS_FILE);\n  const existingUser = users.find(u => u.id === userData.id || u.username.toLowerCase() === userData.username.toLowerCase());\n\n  if (existingUser) {\n    console.warn(`尝试创建已存在的用户: ${userData.username} (ID: ${userData.id})。返回现有用户。`);\n    return {...existingUser};\n  }\n\n  const newUser: User = {\n    id: userData.id,\n    username: userData.username,\n    avatarUrl: `https://placehold.co/100x100.png?text=${userData.username.substring(0, 2).toUpperCase()}`,\n    op: 0,\n    joinedEventIds: [],\n    password: userData.password,\n  };\n  users.push(newUser);\n  try {\n    await writeData<User>(USERS_FILE, users);\n  } catch (error) {\n      console.error(\"创建用户时写入数据失败:\", error);\n  }\n  return {...newUser};\n}\n\n// --- Announcement Functions ---\nexport async function getAnnouncements(): Promise<Announcement[]> {\n    return readData<Announcement>(ABOUT_USER_FILE);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 718, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/namemc.ts"],"sourcesContent":["\n'use server';\n\n/**\n * @fileOverview Mocks a check to NameMC to see if a username is valid.\n */\n\n/**\n * Mocks a check to NameMC to see if a username is valid.\n * In a real application, this would involve an API call to NameMC.\n * @param username The Minecraft username to check.\n * @returns Promise<boolean> True if the username is considered valid, false otherwise.\n */\nexport async function checkNameMC(username: string): Promise<boolean> {\n  console.log(`Pretending to check NameMC for username: ${username}`);\n  // In a real scenario:\n  // try {\n  //   // Example: const response = await fetch(`https://api.namemc.com/profile/${username}/uuid`);\n  //   // return response.ok;\n  // } catch (error) {\n  //   console.error(\"NameMC check failed:\", error);\n  //   return false;\n  // }\n\n  // For testing the \"invalid\" path in the login flow\n  if (username.toLowerCase() === \"invalid_player_for_testing\") {\n    console.log(`Mock: Username \"${username}\" is considered invalid by NameMC.`);\n    return false;\n  }\n\n  // Mock: assume most usernames are valid for now\n  console.log(`Mock: Username \"${username}\" is considered valid by NameMC.`);\n  return true;\n}\n"],"names":[],"mappings":";;;;;;;;AAaO,eAAe,uCAAS,GAAT,YAAY,QAAgB;IAChD,QAAQ,GAAG,CAAC,CAAC,yCAAyC,EAAE,UAAU;IAClE,sBAAsB;IACtB,QAAQ;IACR,iGAAiG;IACjG,2BAA2B;IAC3B,oBAAoB;IACpB,kDAAkD;IAClD,kBAAkB;IAClB,IAAI;IAEJ,mDAAmD;IACnD,IAAI,SAAS,WAAW,OAAO,8BAA8B;QAC3D,QAAQ,GAAG,CAAC,CAAC,gBAAgB,EAAE,SAAS,kCAAkC,CAAC;QAC3E,OAAO;IACT;IAEA,gDAAgD;IAChD,QAAQ,GAAG,CAAC,CAAC,gBAAgB,EAAE,SAAS,gCAAgC,CAAC;IACzE,OAAO;AACT;;;IApBsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 756, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { cookies } from 'next/headers';\nimport { redirect } from 'next/navigation';\nimport { z } from 'zod';\nimport {\n  createEvent as apiCreateEvent,\n  joinEvent as apiJoinEvent,\n  leaveEvent as apiLeaveEvent,\n  checkInUser as apiCheckInUser,\n  getUserById,\n  getUserByUsername,\n  getEventById,\n  getEvents as apiGetEvents,\n  createUser as apiCreateUser,\n  getEventByCdKey,\n  getAnnouncements as apiGetAnnouncements,\n  deleteEventById as apiDeleteEventById,\n  updateEventById as apiUpdateEventById,\n} from './data';\nimport type { Event, User, Announcement } from './types';\nimport { checkNameMC } from './namemc';\n\nconst MAX_AGE = 60 * 60 * 24 * 30;\n\nconst MinecraftUsernameSchema = z.string()\n  .min(3, \"Minecraft 用户名长度必须在 3 到 16 个字符之间。\")\n  .max(16, \"Minecraft 用户名长度必须在 3 到 16 个字符之间。\")\n  .regex(/^[a-zA-Z0-9_]+$/, \"Minecraft 用户名只能包含字母、数字和下划线。\")\n  .refine(username => !username.startsWith('_') && !username.endsWith('_'), {\n    message: \"Minecraft 用户名不能以下划线开头或结尾。\",\n  });\n\nconst AuthFormSchema = z.object({\n  minecraftUsername: MinecraftUsernameSchema,\n  password: z.string().min(6, \"密码至少需要6个字符。\"),\n  confirmPassword: z.string().optional(),\n  authMode: z.enum(['login', 'register']),\n}).refine(data => {\n  if (data.authMode === 'register') {\n    return data.password === data.confirmPassword;\n  }\n  return true;\n}, {\n  message: \"两次输入的密码不匹配。\",\n  path: [\"confirmPassword\"], // Path to show error on\n});\n\nexport type AuthFormState = {\n  message?: string | null;\n  errors?: {\n    minecraftUsername?: string[];\n    password?: string[];\n    confirmPassword?: string[];\n    authMode?: string[];\n    form?: string[]; // For general form errors\n  };\n  success: boolean;\n  userId?: string; // For successful login/registration\n};\n\nexport async function authenticateUserAction(prevState: AuthFormState, formData: FormData): Promise<AuthFormState> {\n  try {\n    const rawFormData = Object.fromEntries(formData.entries());\n    const validatedFields = AuthFormSchema.safeParse(rawFormData);\n\n    if (!validatedFields.success) {\n      return {\n        message: '输入无效。请检查您填写的信息。',\n        errors: validatedFields.error.flatten().fieldErrors,\n        success: false,\n      };\n    }\n\n    const { minecraftUsername, password, authMode } = validatedFields.data;\n\n    if (authMode === 'login') {\n      const user = await getUserByUsername(minecraftUsername); // Case-insensitive check for existence\n      if (!user) {\n        return { message: '用户不存在。请检查您的用户名或先注册。', errors: { minecraftUsername: ['该用户不存在。'] }, success: false };\n      }\n      // For login, password check should ideally be against the stored username's casing if sensitive,\n      // but for this prototype, direct comparison is fine.\n      if (user.password !== password) {\n        return { message: '密码不正确。', errors: { password: ['密码不正确。'] }, success: false };\n      }\n      // Login successful\n      cookies().set('userId', user.id, { httpOnly: true, secure: process.env.NODE_ENV === 'production', maxAge: MAX_AGE, path: '/', sameSite: 'lax' });\n      redirect('/dashboard');\n      // Unreachable, but good practice for type consistency if redirect doesn't happen immediately\n      // return { success: true, message: \"登录成功！\", userId: user.id };\n\n    } else if (authMode === 'register') {\n      // Username format is already validated by Zod schema\n\n      // Check NameMC (simulated)\n      const isNameMCValid = await checkNameMC(minecraftUsername);\n      if (!isNameMCValid) {\n        return { message: '此 Minecraft 用户名在 NameMC 上无效或无法验证。', errors: { minecraftUsername: ['此 Minecraft 用户名在 NameMC 上无效或无法验证。'] }, success: false };\n      }\n\n      // Check if username already exists (case-insensitive)\n      const existingUser = await getUserByUsername(minecraftUsername);\n      if (existingUser) {\n        return { message: '此 Minecraft 用户名已被注册。', errors: { minecraftUsername: ['此 Minecraft 用户名已被注册。'] }, success: false };\n      }\n\n      // Create new user\n      let newUser: User | null = null;\n      try {\n        newUser = await apiCreateUser({\n          id: minecraftUsername, // Use username as ID for new users\n          username: minecraftUsername,\n          password: password,\n          // op, avatarUrl, joinedEventIds will be set to defaults by apiCreateUser\n        });\n      } catch (error: any) {\n        console.error(\"authenticateUserAction - Registration - apiCreateUser failed:\", error);\n        return { message: `创建用户时出错: ${error.message || '未知错误'}`, errors: { form: [`创建用户时出错: ${error.message || '未知错误'}`] }, success: false };\n      }\n\n      if (!newUser || !newUser.id) {\n         return { message: '创建用户后未能获取用户信息。', errors: { form: ['创建用户后未能获取用户信息。'] }, success: false };\n      }\n\n      // Registration successful, log in the new user\n      cookies().set('userId', newUser.id, { httpOnly: true, secure: process.env.NODE_ENV === 'production', maxAge: MAX_AGE, path: '/', sameSite: 'lax' });\n      redirect('/dashboard');\n      // Unreachable\n      // return { success: true, message: \"注册成功！\", userId: newUser.id };\n    } else {\n      return { message: \"无效的操作模式。\", success: false, errors: {authMode: [\"无效的操作模式。\"]} };\n    }\n\n  } catch (error: any) {\n    if (error && typeof error === 'object' && 'digest' in error && typeof error.digest === 'string' && error.digest.startsWith('NEXT_REDIRECT')) {\n      throw error; // Re-throw NEXT_REDIRECT error\n    }\n    console.error(\"Authenticate User Action - Server Error:\", error);\n    return { message: '认证过程中发生服务器内部错误，请稍后再试。', success: false, errors: { form: ['认证过程中发生服务器内部错误，请稍后再试。']} };\n  }\n}\n\n\nexport async function logout() {\n  cookies().delete('userId');\n  redirect('/login');\n}\n\nexport async function getSessionUser(): Promise<User | null> {\n  const userId = cookies().get('userId')?.value;\n  if (!userId) return null;\n  try {\n    const user = await getUserById(userId);\n    return user || null;\n  } catch (error) {\n    console.error(\"获取会话用户失败:\", error);\n    return null;\n  }\n}\n\nconst CreateEventSchema = z.object({\n  name: z.string().min(3, \"活动名称至少需要3个字符。\"),\n  date: z.string().refine((date) => !isNaN(Date.parse(date)), \"无效的日期格式。\"),\n  description: z.string().min(10, \"描述至少需要10个字符。\"),\n  participantLimit: z.preprocess(\n    (val) => (val === \"\" || val === null || val === undefined ? undefined : Number(val)),\n    z.number().int().positive().optional()\n  ),\n  cdKey: z.string().min(4, \"活动代码至少需要4个字符。\").max(20, \"活动代码最多20个字符。\"),\n  imageUrl: z.string().url(\"无效的图片链接。\").optional().or(z.literal('')),\n  userPassword: z.string().min(1, \"您的账户密码不能为空。\")\n});\n\nexport async function createEventAction(prevState: any, formData: FormData) {\n  const rawFormData = Object.fromEntries(formData.entries());\n  const validatedFields = CreateEventSchema.safeParse(rawFormData);\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: '创建活动失败。请检查所填字段。',\n      success: false,\n    };\n  }\n\n  const user = await getSessionUser();\n  if (!user) {\n    return { message: '需要认证才能创建活动。请先登录。', errors: {}, success: false };\n  }\n  if (user.op !== 1) {\n    return { message: '您没有创建活动的权限。', errors: {}, success: false };\n  }\n\n  if (!user.password || user.password !== validatedFields.data.userPassword) {\n    return {\n      errors: { ...(validatedFields.error?.flatten().fieldErrors || {}), userPassword: ['您的账户密码不正确。'] },\n      message: '创建活动失败。账户密码验证失败。',\n      success: false,\n    };\n  }\n\n  let newEventId: string | undefined;\n  try {\n    const { userPassword, ...eventDataForApi } = validatedFields.data;\n    const newEvent = await apiCreateEvent(\n        eventDataForApi as Omit<Event, 'id' | 'participants' | 'organizerId'>,\n        user.id\n    );\n    newEventId = newEvent.id;\n  } catch (error) {\n    console.error(\"创建活动错误:\", error);\n    return { message: '在服务器上创建活动失败。请稍后重试。', errors: {}, success: false };\n  }\n\n  if (newEventId) {\n    redirect(`/events/${newEventId}`);\n  } else {\n    return { message: '创建活动后未能获取活动ID。', errors: {}, success: false };\n  }\n}\n\nconst UpdateEventSchema = CreateEventSchema.extend({\n  eventId: z.string().min(1, \"Event ID is required.\"),\n});\n\n\nexport async function updateEventAction(prevState: any, formData: FormData) {\n  const rawFormData = Object.fromEntries(formData.entries());\n  const validatedFields = UpdateEventSchema.safeParse(rawFormData);\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: '更新活动失败。请检查所填字段。',\n      success: false,\n    };\n  }\n\n  const user = await getSessionUser();\n  if (!user) {\n    return { message: '需要认证才能更新活动。请先登录。', errors: {}, success: false };\n  }\n  if (user.op !== 1) {\n    return { message: '您没有更新活动的权限。', errors: {}, success: false };\n  }\n   if (!user.password || user.password !== validatedFields.data.userPassword) {\n    return {\n      errors: { ...(validatedFields.error?.flatten().fieldErrors || {}), userPassword: ['您的账户密码不正确。'] },\n      message: '更新活动失败。账户密码验证失败。',\n      success: false,\n    };\n  }\n\n  try {\n    const { userPassword, eventId, ...eventDataToUpdate } = validatedFields.data;\n    const updatedEvent = await apiUpdateEventById(eventId, eventDataToUpdate as Partial<Omit<Event, 'id' | 'participants' | 'organizerId'>>);\n    if (!updatedEvent) {\n      return { message: '更新活动失败，活动未找到。', errors: { eventId: ['活动未找到。'] }, success: false };\n    }\n  } catch (error) {\n    console.error(\"更新活动错误:\", error);\n    return { message: '在服务器上更新活动失败。请稍后重试。', errors: {}, success: false };\n  }\n  redirect(`/events/${validatedFields.data.eventId}`);\n}\n\n\nexport async function deleteEventAction(eventId: string, userPassword: string): Promise<{ success: boolean, message: string }> {\n  const user = await getSessionUser();\n  if (!user) {\n    return { success: false, message: '需要认证才能删除活动。请先登录。' };\n  }\n  if (user.op !== 1) {\n    return { success: false, message: '您没有删除活动的权限。' };\n  }\n  if (!user.password || user.password !== userPassword) {\n    return { success: false, message: '您的账户密码不正确，无法删除活动。' };\n  }\n\n  try {\n    const result = await apiDeleteEventById(eventId);\n    return result;\n  } catch (error) {\n    console.error(\"删除活动错误:\", error);\n    return { success: false, message: '在服务器上删除活动失败。请稍后重试。' };\n  }\n}\n\n\nexport async function joinEventAction(eventId: string, cdKeyInput: string) {\n  const user = await getSessionUser();\n  if (!user) {\n    return { success: false, message: '您必须登录才能加入活动。' };\n  }\n  try {\n    const result = await apiJoinEvent(user.id, eventId, cdKeyInput);\n    return result;\n  } catch (error) {\n    console.error(\"加入活动错误:\", error);\n    return { success: false, message: '加入活动时发生服务器错误。' };\n  }\n}\n\nexport async function joinEventUsingCdKeyOnlyAction(cdKey: string): Promise<{ success: boolean, message: string, event?: Event }> {\n  const user = await getSessionUser();\n  if (!user) {\n    return { success: false, message: '您必须登录才能加入活动。' };\n  }\n\n  if (!cdKey || cdKey.trim() === '') {\n    return { success: false, message: '请输入有效的活动代码。' };\n  }\n\n  const eventToJoin = await getEventByCdKey(cdKey);\n  if (!eventToJoin) {\n    return { success: false, message: '具有此活动代码的活动未找到。' };\n  }\n\n  try {\n    const result = await apiJoinEvent(user.id, eventToJoin.id, cdKey);\n    return result;\n  } catch (error) {\n    console.error(\"使用活动代码加入活动错误:\", error);\n    return { success: false, message: '使用活动代码加入活动时发生服务器错误。' };\n  }\n}\n\n\nexport async function leaveEventAction(eventId: string) {\n  const user = await getSessionUser();\n  if (!user) {\n    return { success: false, message: '您必须登录才能离开活动。' };\n  }\n  try {\n    const result = await apiLeaveEvent(user.id, eventId);\n    return result;\n  } catch (error) {\n    console.error(\"离开活动错误:\", error);\n    return { success: false, message: '离开活动时发生服务器错误。' };\n  }\n}\n\nexport async function checkInAction(eventId: string) {\n  const user = await getSessionUser();\n  if (!user) {\n    return { success: false, message: '您必须登录才能签到。' };\n  }\n  try {\n    const result = await apiCheckInUser(user.id, eventId);\n    return result;\n  } catch (error) {\n    console.error(\"签到错误:\", error);\n    return { success: false, message: '签到过程中发生服务器错误。' };\n  }\n}\n\nexport async function getEventDetailsAction(eventId: string): Promise<Event | null> {\n  try {\n    const event = await getEventById(eventId);\n    return event || null;\n  } catch (error) {\n    console.error(\"获取活动详情错误 (action):\", error);\n    return null;\n  }\n}\n\nexport async function getEventsAction(): Promise<Event[]> {\n  try {\n    return await apiGetEvents();\n  } catch (error) {\n    console.error(\"获取所有活动失败 (action):\", error);\n    return [];\n  }\n}\n\nexport async function getUserProfile(userId: string): Promise<{ user: User; joinedEvents: Event[] } | null> {\n  const user = await getUserById(userId);\n  if (!user) {\n    console.warn(`用户个人资料未找到: ${userId}`);\n    return null;\n  }\n\n  const allEvents = await apiGetEvents();\n\n  const joinedEventIds = user.joinedEventIds || [];\n  const joinedEventsRaw = allEvents.filter(event => joinedEventIds.includes(event.id));\n\n  const participantUserIdsInJoinedEvents = new Set<string>();\n  joinedEventsRaw.forEach(event => {\n    (event.participants || []).forEach(p => participantUserIdsInJoinedEvents.add(p.id));\n  });\n\n  const allParticipantUsersData: User[] = [];\n   for (const pId of Array.from(participantUserIdsInJoinedEvents)) {\n    const pUser = await getUserById(pId);\n    if (pUser) {\n      allParticipantUsersData.push(pUser);\n    }\n  }\n\n  const enrichedJoinedEvents = joinedEventsRaw.map(ev => {\n    const mainEventParticipantsEnriched = (ev.participants || []).map(p => {\n         const fullPUser = allParticipantUsersData.find(up => up.id === p.id);\n         return {\n            id: p.id,\n            username: fullPUser?.username || p.username || '未知用户',\n            avatarUrl: fullPUser?.avatarUrl || p.avatarUrl || `https://placehold.co/40x40.png?text=${(p.username || '??').substring(0,2)}`,\n            isCheckedIn: p.isCheckedIn === true,\n            op: fullPUser?.op ?? p.op ?? 0,\n            password: fullPUser?.password // Ensure password is part of participant if needed by UserAvatar or other components\n         };\n    });\n    return { ...ev, participants: mainEventParticipantsEnriched };\n  });\n\n  return {\n    user: {...user},\n    joinedEvents: enrichedJoinedEvents.map(e => ({...e}))\n  };\n}\n\nexport async function getAnnouncementsAction(): Promise<Announcement[]> {\n  try {\n    return await apiGetAnnouncements();\n  } catch (error) {\n    console.error(\"获取公告失败 (action):\", error);\n    return [];\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1333, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 1423, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/edit-event/%5Bid%5D/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/edit-event/[id]/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/edit-event/[id]/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0S,GACvU,wEACA","debugId":null}},
    {"offset": {"line": 1437, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/edit-event/%5Bid%5D/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/edit-event/[id]/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/edit-event/[id]/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAsR,GACnT,oDACA","debugId":null}},
    {"offset": {"line": 1451, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}